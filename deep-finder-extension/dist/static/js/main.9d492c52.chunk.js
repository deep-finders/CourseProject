(this["webpackJsonpdeep-finder-extension"]=this["webpackJsonpdeep-finder-extension"]||[]).push([[0],{17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),l=n.n(c),s=(n(17),n(9),n(12)),i=n(11),o=n(2),u=n.n(o),d=n(4),p=n(3),f=n(8);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=r.createElement("defs",null,r.createElement("style",null,"\n      .cls-1 {\n        fill: none;\n      }\n    ")),g=r.createElement("path",{d:"M30,16V9a7.0078,7.0078,0,0,0-7-7H2V16H8.4648l3.5774,5.3662.8453,5.9165A2.0094,2.0094,0,0,0,14.8672,29H17a3.0033,3.0033,0,0,0,3-3V20h6A4.0045,4.0045,0,0,0,30,16ZM8,14H4V4H8Zm20,2a2.0025,2.0025,0,0,1-2,2H18v8a1.0008,1.0008,0,0,1-1,1H14.8672l-.9094-6.3662L10,14.6973V4H23a5.0057,5.0057,0,0,1,5,5Z"}),j=r.createElement("rect",{id:"_Transparent_Rectangle_","data-name":"<Transparent Rectangle>",className:"cls-1",width:32,height:32});function x(e,t){var n=e.title,a=e.titleId,c=h(e,["title","titleId"]);return r.createElement("svg",b({width:"32px",height:"32px",viewBox:"0 0 32 32",id:"icon",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,m,g,j)}var O=r.forwardRef(x);n.p;function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var w=r.createElement("defs",null,r.createElement("style",null,"\n      .cls-1 {\n        fill: none;\n      }\n    ")),E=r.createElement("path",{d:"M26,12H20V6a3.0033,3.0033,0,0,0-3-3H14.8672a2.0094,2.0094,0,0,0-1.98,1.7173l-.8453,5.9165L8.4648,16H2V30H23a7.0078,7.0078,0,0,0,7-7V16A4.0045,4.0045,0,0,0,26,12ZM8,28H4V18H8Zm20-5a5.0057,5.0057,0,0,1-5,5H10V17.3027l3.9578-5.9365L14.8672,5H17a1.0008,1.0008,0,0,1,1,1v8h8a2.0025,2.0025,0,0,1,2,2Z",transform:"translate(0 0)"}),k=r.createElement("rect",{id:"_Transparent_Rectangle_","data-name":"<Transparent Rectangle>",className:"cls-1",width:32,height:32});function C(e,t){var n=e.title,a=e.titleId,c=v(e,["title","titleId"]);return r.createElement("svg",y({width:"32px",height:"32px",viewBox:"0 0 32 32",id:"icon",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,w,E,k)}var S=r.forwardRef(C),F=(n.p,function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.feedback,e.next=3,fetch("".concat("https://deepfindersfa.azurewebsites.net/api/HttpDeepFindProvideFeedbackTrigger?code=xjx9fLuR3bJdVKs6ExXnRt2jcV3CUbfogHsU3rWnJzfOgvBaydW73Q=="),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:n,feedback:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=n(1),M=function(e){var t=e.handleClickResult,n=(e.isSelected,e.searchResult),a=n.id,c=n.passage,l=n.rank,s=Object(r.useState)(),i=Object(p.a)(s,2),o=i[0],u=i[1],d=function(e,t){e.stopPropagation(),u(t),F({id:a,feedback:t.toString()})};return Object(H.jsxs)("div",{className:"px-2 py-3 hover:shadow-md transition-all rounded-md shadow-sm border-gray-300 border border-solid cursor-pointer hover:bg-gray-50",onClick:function(){return t(n)},children:[Object(H.jsxs)("div",{className:"flex flex-nowrap justify-between text-gray-400",children:[Object(H.jsxs)("div",{className:"text-xs font-light uppercase",children:["Passage ",l]}),Object(H.jsxs)("div",{className:"flex flex-nowrap space-x-2",children:[Object(H.jsx)(O,{className:Object(f.a)("h-4 w-4 fill-current",void 0===o?"cursor-pointer hover:text-black":"cursor-not-allowed",-1===o?"text-black":""),onClick:function(e){return d(e,-1)}}),Object(H.jsx)(S,{className:Object(f.a)("h-4 w-4 fill-current",void 0===o?"cursor-pointer hover:text-black":"cursor-not-allowed",1===o?"text-black":""),onClick:function(e){return d(e,1)}})]})]}),Object(H.jsx)("p",{className:"mt-2",children:c})]})},N=function(e){var t=e.handleClickResult,n=void 0===t?function(){}:t,r=e.searchResults,a=void 0===r?[]:r,c=e.selectedPassageRank;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("div",{className:"flex my-4 space-x-4 items-center",children:[Object(H.jsx)("div",{className:"h-1 border-t border-gray-200 border-solid w-full"}),Object(H.jsx)("span",{className:"flex-grow whitespace-nowrap",children:"".concat(a.length," results found")}),Object(H.jsx)("div",{className:"h-1 border-t border-gray-200 border-solid w-full"})]}),Object(H.jsx)("section",{className:"flex flex-col space-y-4 max-h-96 overflow-y-scroll",children:a.map((function(e,t){return Object(H.jsx)(M,{handleClickResult:n,searchResult:e,isSelected:c===e.rank},"search-result-".concat(t))}))})]})};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var R=r.createElement("path",{d:"M 13 3 C 7.4889971 3 3 7.4889971 3 13 C 3 18.511003 7.4889971 23 13 23 C 15.396508 23 17.597385 22.148986 19.322266 20.736328 L 25.292969 26.707031 A 1.0001 1.0001 0 1 0 26.707031 25.292969 L 20.736328 19.322266 C 22.148986 17.597385 23 15.396508 23 13 C 23 7.4889971 18.511003 3 13 3 z M 13 5 C 17.430123 5 21 8.5698774 21 13 C 21 17.430123 17.430123 21 13 21 C 8.5698774 21 5 17.430123 5 13 C 5 8.5698774 8.5698774 5 13 5 z"});function z(e,t){var n=e.title,a=e.titleId,c=B(e,["title","titleId"]);return r.createElement("svg",P({fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"30px",height:"30px",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,R)}var L=r.forwardRef(z);n.p;function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _=r.createElement("g",null),V=r.createElement("g",null),D=r.createElement("g",null),q=r.createElement("g",null),A=r.createElement("g",null),J=r.createElement("g",null),Z=r.createElement("g",null),U=r.createElement("g",null),G=r.createElement("g",null),K=r.createElement("g",null),W=r.createElement("g",null),X=r.createElement("g",null),Y=r.createElement("g",null),Q=r.createElement("g",null),$=r.createElement("g",null);function ee(e,t){var n=e.title,a=e.titleId,c=I(e,["title","titleId"]);return r.createElement("svg",T({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 496 496",style:{enableBackground:"new 0 0 496 496"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,r.createElement("path",{style:{fill:"#76FFE5"},d:"M248,92c-13.6,0-24-10.4-24-24V24c0-13.6,10.4-24,24-24s24,10.4,24,24v44C272,80.8,261.6,92,248,92z"}),r.createElement("path",{style:{fill:"#0DBFBA"},d:"M248,496c-13.6,0-24-10.4-24-24v-44c0-13.6,10.4-24,24-24s24,10.4,24,24v44 C272,485.6,261.6,496,248,496z"}),r.createElement("path",{style:{fill:"#BBFFF2"},d:"M157.6,116c-8,0-16-4-20.8-12l-21.6-37.6c-6.4-11.2-2.4-26.4,8.8-32.8s26.4-2.4,32.8,8.8L178.4,80 c6.4,11.2,2.4,26.4-8.8,32.8C166.4,114.4,161.6,116,157.6,116z"}),r.createElement("path",{style:{fill:"#1BCEB8"},d:"M360,465.6c-8,0-16-4-20.8-12L317.6,416c-6.4-11.2-2.4-26.4,8.8-32.8c11.2-6.4,26.4-2.4,32.8,8.8 l21.6,37.6c6.4,11.2,2.4,26.4-8.8,32.8C368,464.8,364,465.6,360,465.6z"}),r.createElement("path",{style:{fill:"#E1FFF9"},d:"M92,181.6c-4,0-8-0.8-12-3.2l-37.6-21.6c-11.2-6.4-15.2-21.6-8.8-32.8s21.6-15.2,32.8-8.8l37.6,21.6 c11.2,6.4,15.2,21.6,8.8,32.8C108,177.6,100,181.6,92,181.6z"}),r.createElement("path",{style:{fill:"#26DBC0"},d:"M442.4,384c-4,0-8-0.8-12-3.2L392,359.2c-11.2-6.4-15.2-21.6-8.8-32.8c6.4-11.2,21.6-15.2,32.8-8.8 l37.6,21.6c11.2,6.4,15.2,21.6,8.8,32.8C458.4,380,450.4,384,442.4,384z"}),r.createElement("path",{style:{fill:"#F3FFFD"},d:"M68,272H24c-13.6,0-24-10.4-24-24s10.4-24,24-24h44c13.6,0,24,10.4,24,24S80.8,272,68,272z"}),r.createElement("path",{style:{fill:"#2EE5C6"},d:"M472,272h-44c-13.6,0-24-10.4-24-24s10.4-24,24-24h44c13.6,0,24,10.4,24,24S485.6,272,472,272z"}),r.createElement("path",{style:{fill:"#11AEBA"},d:"M53.6,384c-8,0-16-4-20.8-12c-6.4-11.2-2.4-26.4,8.8-32.8l37.6-21.6c11.2-6.4,26.4-2.4,32.8,8.8 c6.4,11.2,2.4,26.4-8.8,32.8l-37.6,21.6C62.4,383.2,58.4,384,53.6,384z"}),r.createElement("path",{style:{fill:"#3BEDCB"},d:"M404,181.6c-8,0-16-4-20.8-12c-6.4-11.2-2.4-26.4,8.8-32.8l37.6-21.6c11.2-6.4,26.4-2.4,32.8,8.8 s2.4,26.4-8.8,32.8L416,178.4C412,180.8,408,181.6,404,181.6z"}),r.createElement("path",{style:{fill:"#0FB8BC"},d:"M136,465.6c-4,0-8-0.8-12-3.2c-11.2-6.4-15.2-21.6-8.8-32.8l21.6-37.6c6.4-11.2,21.6-15.2,32.8-8.8 c11.2,6.4,15.2,21.6,8.8,32.8l-21.6,37.6C152,461.6,144,465.6,136,465.6z"}),r.createElement("path",{style:{fill:"#57F7D8"},d:"M338.4,116c-4,0-8-0.8-12-3.2c-11.2-6.4-15.2-21.6-8.8-32.8l21.6-37.6c6.4-11.2,21.6-15.2,32.8-8.8 c11.2,6.4,15.2,21.6,8.8,32.8L359.2,104C354.4,111.2,346.4,116,338.4,116z"}),_,V,D,q,A,J,Z,U,G,K,W,X,Y,Q,$)}var te=r.forwardRef(ee),ne=(n.p,function(e){var t=e.handleSearch,n=void 0===t?function(){}:t,a=e.isLoading,c=void 0!==a&&a,l=Object(r.useState)(""),s=Object(p.a)(l,2),i=s[0],o=s[1];return Object(H.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(i)},className:"space-y-4",children:[Object(H.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex flex-col space-y-1",children:[Object(H.jsx)("span",{children:"Search"}),Object(H.jsx)("input",{id:"search-query-input",className:"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal",onChange:function(e){var t=e.target;return o(t.value)},type:"text",value:i})]}),Object(H.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50 flex flex-nowrap items-center justify-center space-x-2 disabled:hover:bg-blue-500 mx-auto",type:"submit",disabled:c,children:c?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(te,{className:"h-5 w-5 animate-spin"}),Object(H.jsx)("span",{children:"Searching"})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(L,{className:"h-5 w-5 fill-current"}),Object(H.jsx)("span",{children:"Search"})]})})]})}),re=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.documentHtml,r=t.query,e.next=3,fetch("".concat("https://deepfindersfa.azurewebsites.net/api/HttpDeepFindTrigger?code=6bDwaxTAGKSjKk9kCfx2b0SeoT0GrBUS7aClM9Yjz8pYzoGbHLGukg=="),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentHtml:n,query:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae="deep-finder",ce=function(){var e=Object(r.useRef)([]),t=Object(r.useState)(!1),n=Object(p.a)(t,2),a=n[0],c=n[1],l=Object(r.useState)(""),o=Object(p.a)(l,2),f=(o[0],o[1]),b=Object(r.useState)([]),h=Object(p.a)(b,2),m=h[0],g=h[1],j=Object(r.useState)([]),x=Object(p.a)(j,2),O=x[0],y=x[1],v=Object(r.useState)(),w=Object(p.a)(v,2),E=w[0],k=w[1],C=Object(r.useState)(),S=Object(p.a)(C,2),F=S[0],M=S[1],P=Object(r.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,l,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.documentHtml,r=t.documentText,a=t.documentPTags,l=t.pageUrl,s=t.query,e.prev=1,e.next=4,re({documentHtml:n,documentText:r,documentPTags:a,pageUrl:l,query:s});case 4:i=e.sent,g(i),c(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),c(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){if(!F||F.name!==ae){var t=function(t){var n=t.action,r=t.payload;switch(console.info("Handling message:",{action:n,payload:r}),n){case"passage_found":e.current.push(r),y(Object(i.a)(e.current));break;case"send_page":P(Object(s.a)({},r));break;default:return}};!function(){n.apply(this,arguments)}()}function n(){return(n=Object(d.a)(u.a.mark((function e(){var n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!chrome||!chrome.runtime){e.next=9;break}return e.next=3,chrome.tabs.query({active:!0,currentWindow:!0});case 3:n=e.sent,r=Object(p.a)(n,1),a=r[0],(c=chrome.tabs.connect(a.id,{name:ae})).onMessage.addListener(t),M(c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[P]),Object(r.useEffect)((function(){F&&m&&m.length>0&&F.postMessage({action:"find_passages",payload:m})}),[m,F]);var B=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f(n),c(!0),e.current=[],F&&F.postMessage({action:"clear_highlights"}),F&&F.postMessage({action:"request_page",payload:{query:n}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"mx-auto w-96 shadow-lg rounded-sm px-4 py-8",children:[Object(H.jsx)("h1",{className:"text-2xl font-bold tracking-wide mb-8",children:"Deep Finder"}),Object(H.jsx)(ne,{handleSearch:B,isLoading:a}),O&&O.length>0&&Object(H.jsx)(N,{handleClickResult:function(e){k(e.rank),F&&F.postMessage({action:"select_result",payload:e})},searchResults:O,selectedPassageRank:E})]})};var le=function(){return Object(H.jsx)(ce,{})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),r(e),a(e),c(e),l(e)}))};l.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(le,{})}),document.getElementById("root")),se()},9:function(e,t,n){}},[[20,1,2]]]);