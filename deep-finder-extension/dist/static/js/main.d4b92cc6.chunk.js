(this["webpackJsonpdeep-finder-extension"]=this["webpackJsonpdeep-finder-extension"]||[]).push([[0],{13:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(7),s=n.n(c),o=(n(13),n(6),n(8)),i=n(2),l=n.n(i),u=n(4),d=n(3),p=n(0),b=function(e){var t=e.handleClickResult,n=(e.isSelected,e.searchResult),r=(n.id,n.passage);n.rank;return Object(p.jsx)("div",{className:"px-2 py-3 hover:shadow-md transition-all rounded-md shadow-sm border-gray-300 border border-solid cursor-pointer hover:bg-gray-50",onClick:function(){return t(n)},children:Object(p.jsx)("p",{className:"",children:r})})},f=function(e){var t=e.handleClickResult,n=void 0===t?function(){}:t,r=e.searchResults,a=void 0===r?[]:r,c=e.selectedPassageRank;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"flex my-4 space-x-4 items-center",children:[Object(p.jsx)("div",{className:"h-1 border-t border-gray-200 border-solid w-full"}),Object(p.jsx)("span",{className:"flex-grow whitespace-nowrap",children:"".concat(a.length," results found")}),Object(p.jsx)("div",{className:"h-1 border-t border-gray-200 border-solid w-full"})]}),Object(p.jsx)("section",{className:"flex flex-col space-y-4 max-h-96 overflow-y-scroll",children:a.map((function(e,t){return Object(p.jsx)(b,{handleClickResult:n,searchResult:e,isSelected:c===e.rank},"search-result-".concat(t))}))})]})};function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var x=r.createElement("path",{d:"M 13 3 C 7.4889971 3 3 7.4889971 3 13 C 3 18.511003 7.4889971 23 13 23 C 15.396508 23 17.597385 22.148986 19.322266 20.736328 L 25.292969 26.707031 A 1.0001 1.0001 0 1 0 26.707031 25.292969 L 20.736328 19.322266 C 22.148986 17.597385 23 15.396508 23 13 C 23 7.4889971 18.511003 3 13 3 z M 13 5 C 17.430123 5 21 8.5698774 21 13 C 21 17.430123 17.430123 21 13 21 C 8.5698774 21 5 17.430123 5 13 C 5 8.5698774 8.5698774 5 13 5 z"});function m(e,t){var n=e.title,a=e.titleId,c=j(e,["title","titleId"]);return r.createElement("svg",h({fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"30px",height:"30px",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,x)}var g=r.forwardRef(m),O=(n.p,function(e){var t=e.handleSearch,n=void 0===t?function(){}:t,a=e.isLoading,c=void 0!==a&&a,s=Object(r.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1];return Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(i)},className:"space-y-4",children:[Object(p.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex flex-col space-y-1",children:[Object(p.jsx)("span",{children:"Search"}),Object(p.jsx)("input",{id:"search-query-input",className:"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal",onChange:function(e){var t=e.target;return l(t.value)},type:"text",value:i})]}),Object(p.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50 flex flex-nowrap items-center justify-center space-x-2 disabled:hover:bg-blue-500 mx-auto",type:"submit",disabled:c,children:[Object(p.jsx)(g,{className:"h-5 w-5 fill-current"}),Object(p.jsx)("span",{children:"Search"})]})]})}),v=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.documentHtml,r=t.query,e.next=3;break;case 3:return e.next=6,fetch("".concat("https://deepfindersfa.azurewebsites.net/api/HttpDeepFindTrigger?code=6bDwaxTAGKSjKk9kCfx2b0SeoT0GrBUS7aClM9Yjz8pYzoGbHLGukg=="),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentHtml:n,query:r})});case 6:return a=e.sent,e.abrupt("return",a.json());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(d.a)(c,2),i=(s[0],s[1]),b=Object(r.useState)([]),h=Object(d.a)(b,2),j=h[0],x=h[1],m=Object(r.useState)(),g=Object(d.a)(m,2),y=g[0],w=g[1],k=Object(r.useState)(),C=Object(d.a)(k,2),S=C[0],N=C[1],R=Object(r.useCallback)(function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,s,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.documentHtml,r=t.documentText,c=t.documentPTags,s=t.pageUrl,o=t.query,e.prev=1,e.next=4,v({documentHtml:n,documentText:r,documentPTags:c,pageUrl:s,query:o});case 4:i=e.sent,a(!1),x(i),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){var e=function(e){var t=e.action,n=e.payload;console.info("Handing message:",{action:t,payload:n}),"send_page"===t&&R(Object(o.a)({},n))};function t(){return(t=Object(u.a)(l.a.mark((function t(){var n,r,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!chrome||!chrome.runtime){t.next=9;break}return t.next=3,chrome.tabs.query({active:!0,currentWindow:!0});case 3:n=t.sent,r=Object(d.a)(n,1),a=r[0],(c=chrome.tabs.connect(a.id,{name:"deep-finder"})).onMessage.addListener(e),N(c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){S&&S.disconnect()}}),[R]);var T=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t),a(!0),S.postMessage({action:"request_page",payload:{query:t}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"mx-auto w-96 shadow-lg rounded-sm px-4 py-8",children:[Object(p.jsx)("h1",{className:"text-2xl font-bold tracking-wide mb-8",children:"Deep Finder"}),Object(p.jsx)(O,{handleSearch:T,isLoading:n}),j&&j.length>0&&Object(p.jsx)(f,{handleClickResult:function(e){w(e.rank),S&&S.postMessage({action:"select_result",payload:e})},searchResults:j,selectedPassageRank:y})]})};var w=function(){return Object(p.jsx)(y,{})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),k()},6:function(e,t,n){}},[[16,1,2]]]);